--- installer/poldek/capreq.c	2004/01/10 12:45:34	1.25.4.1
+++ installer/poldek/capreq.c	2004/12/01 16:24:52	1.25.4.2
@@ -639,24 +639,22 @@
             if (flag & RPMSENSE_EQUAL) 
                 cr->cr_relflags |= REL_EQ;
 
-                
+            if (crtype == CRTYPE_REQ) {
 #ifndef HAVE_RPM_EXTDEPS
-            if (flag & RPMSENSE_PREREQ) {
-                n_assert(crtype == CRTYPE_REQ);
-                cr->cr_flags |= CAPREQ_PREREQ | CAPREQ_PREREQ_UN;
-            }
+                if (flag & RPMSENSE_PREREQ) {
+                    n_assert(crtype == CRTYPE_REQ);
+                    cr->cr_flags |= CAPREQ_PREREQ | CAPREQ_PREREQ_UN;
+                }
 #else
-            if (isLegacyPreReq(flag)) { /* prepared by rpm < 4.0.2  */
-                n_assert(crtype == CRTYPE_REQ);
-                cr->cr_flags |= CAPREQ_PREREQ | CAPREQ_PREREQ_UN;
+                if (isLegacyPreReq(flag)) { /* prepared by rpm < 4.0.2  */
+                    cr->cr_flags |= CAPREQ_PREREQ | CAPREQ_PREREQ_UN;
                 
-            } else if (isInstallPreReq(flag)) {
-                n_assert(crtype == CRTYPE_REQ);
-                cr->cr_flags |= CAPREQ_PREREQ;
+                } else if (isInstallPreReq(flag)) {
+                    cr->cr_flags |= CAPREQ_PREREQ;
                 
-            } else if (isErasePreReq(flag)) {
-                n_assert(crtype == CRTYPE_REQ);
-                cr->cr_flags |= CAPREQ_PREREQ_UN;
+                } else if (isErasePreReq(flag)) {
+                    cr->cr_flags |= CAPREQ_PREREQ_UN;
+                }
             }
 #endif /* HAVE_RPM_EXTDEPS */
         }
