--- poldek-0.20/pkgdir/pdir/pdir_pkg_store.c.orig	2005-10-13 20:24:50.000000000 +0200
+++ poldek-0.20/pkgdir/pdir/pdir_pkg_store.c	2005-11-30 12:41:46.000000000 +0100
@@ -132,7 +132,7 @@
     if (pkg->fn)
         n_buf_printf(nbuf, "n: %s\n", pkg->fn);
 
-    if (pkg->fmtime)
+    if (((flags & PKGSTORE_NOTIMESTAMP) == 0) && pkg->fmtime)
         n_buf_printf(nbuf, "t: %u\n", pkg->fmtime);
     
     n_buf_printf(nbuf, "F:\n");
--- poldek-0.20/cli/op_makeidx.c.orig	2005-10-10 00:35:28.000000000 +0200
+++ poldek-0.20/cli/op_makeidx.c	2005-11-30 12:52:31.000000000 +0100
@@ -45,6 +45,7 @@
 #define OPT_TYPE_ALIAS  (OPT_GID + 11) /* XXX argp bug? with +8 this doesn't work... */
 #define OPT_NODIFF      (OPT_GID + 9)
 #define OPT_MOPT        (OPT_GID + 10)
+#define	OPT_NOTIMESTAMP	(OPT_GID + 12)
 
 /* The options we understand. */
 static struct argp_option options[] = {
@@ -79,6 +80,10 @@
 
 {"mo", OPT_MOPT, "OPTION[,OPTION]", OPTION_HIDDEN, /* not finished yet */
      N_("index type specific options"), OPT_GID },
+
+{"notimestamp", OPT_NOTIMESTAMP, 0, 0,
+ N_("Don't put package timestamps into created pdir index (poldek 0.18.x compat)."), OPT_GID },
+
 { 0, 0, 0, 0, 0, 0 },
 
 
@@ -176,6 +181,10 @@
             poclidek_op_source_nodesc = 1;
             break;
 
+	case OPT_NOTIMESTAMP:
+	    arg_s->crflags |= PKGDIR_CREAT_v018x;
+	    break;
+
         case OPT_NODIFF:
             arg_s->crflags |= PKGDIR_CREAT_NOPATCH;
             break;
